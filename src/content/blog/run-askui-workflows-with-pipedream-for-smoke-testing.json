{
  "id": "run_askui_workflows_with_pipedream_for_smoke_testi",
  "slug": "run-askui-workflows-with-pipedream-for-smoke-testing",
  "title": "Run AskUI Workflows with Pipedream for Smoke Testing",
  "excerpt": "This blog describes all the steps on how to integrate AskUI into a Pipedream workflow, so we get the benefit of visual selection and user interaction.",
  "content": "<blockquote id=\">Dylan Pierce shared an interesting approach to smoke testing at our meetup: Fill out a contact form with the help of Computer Vision &amp; Large Language Models. Especially the vision part was impressive but it lacked one specific feature: Interaction with the form. How can you be sure your form works if you do not try to fill it out and send it?</blockquote><blockquote id=\">This is where I thought an AskUI integration into the Pipedream workflow could be useful. AskUI uses visual selectors instead of code selectors and can interact like a human with a form like that. Giving us a <em id=\">real</em> smoke test!</blockquote><blockquote id=\">In this blog, I will describe how I integrated AskUI into a Pipedream workflow to benefit for visual selection and user interaction.</blockquote><h1 id=\">Prerequisites</h1><ul id=\"><li id=\">AskUI Controller installed and configured on a remote accessible system like Gitpod or a cloud machine. You can use our <a href=\"https://github.com/askui/askui-try-out\" id=\">Try-Out-Repository</a> or install on your own system (<a href=\"https://docs.askui.com/docs/general/Getting%20Started/Installing%20AskUI/getting-started\" id=\">Windows</a>, <a href=\"https://docs.askui.com/docs/general/Getting%20Started/Installing%20AskUI/getting-started-linux\" id=\">Linux</a>, <a href=\"https://docs.askui.com/docs/general/Getting%20Started/Installing%20AskUI/getting-started-macos\" id=\">macOS</a>)</li></ul><ul id=\"><li id=\">Pipedream account and a workflow. Follow their <a href=\"https://pipedream.com/docs\" id=\">Introduction</a></li></ul><h1 id=\">What Will We Build? Aka the Use Case</h1>\n\n<p id=\">Dylan Pierce showed an awesome use case with Pipedream and Puppeteer, where he implemented a smoke test with the help of AI without writing any selectors by himself. I highly recommend to watch the recording:</p>\n\n<div data-rt-embed-type='true'><div class=\"cookieconsent-optout-marketing\"> Please <a href=\"javascript:Cookiebot.renew()\">accept marketing-cookies</a> to watch this video. </div> <iframe width=\"560\" height=\"315\" data-cookieblock-src=\"https://www.youtube-nocookie.com/embed/o6hej9Ip2vs\" data-cookieconsent=\"marketing\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe></div>\n\n<h2 id=\">Our Use Case: Smoke Test with Visual Selectors</h2>\n\n<p id=\">Dylans use case involved querying a Large Language/Multimodal Model to implement the smoke test. We will modify this a little bit to use the visual selectors from AskUI, which do not rely on the specific UI-technology but identify elements through their appearance with an AI vision model.</p><p id=\">Here are the steps we will implement:</p>\n\n<ul id=\"><li id=\">Trigger the smoke test once per day</li><li id=\">Perform the smoke test with AskUI on a remote system</li><li id=\">Send an email if the smoke test was successful or not</li></ul><h2 id=\">1. Add a Trigger</h2>\n\n<p id=\">The first thing Pipedream wants us to add is a trigger. We add a <strong id=\">Schedule</strong> trigger that will run our Workflow everyday at 9:00 AM.</p><figure id=\" class=\"w-richtext-figure-type-image w-richtext-align-fullwidth\" style=\"max-width:902px\" data-rt-type=\"image\" data-rt-align=\"fullwidth\" data-rt-max-width=\"902px\"><div id=\"><img src=\"https://cdn.prod.website-files.com/6630f90ff7431b0c5b1bb0e7/6634d1c39c4145496ceb6973_65c2573475d52695f95e24d9_pipeship_trigger.png\" loading=\"lazy\" alt=\"Pipeship trigger configuration.\" width=\"auto\" height=\"auto\" id=\"></div></figure><h2 id=\">2. Prepare a Custom Code Action</h2>\n\n<p id=\">AskUI does not have an action in Pipedream. So we will make use of the AskUI node package and run a custom code action. For this we a a _<em id=\">Code</em> action. In this action we will fill out the simple authentication from <a href=\"https://authenticationtest.com/simpleFormAuth/\" id=\">https://authenticationtest.com/simpleFormAuth/</a>. If we see the success page we will send </p><p id=\">We have to do the following steps:</p>\n\n<ul id=\"><li id=\">Add a property <strong id=\"><code id=\">uiControllerUrl</code></strong>, so we do not have to hardcode it into the code</li><li id=\">Store our credentials in <a href=\"https://pipedream.com/settings/env-vars\" id=\">environment variables</a></li><li id=\">Import <strong id=\"><code id=\">UiControlClient</code></strong> from the AskUI node package</li><li id=\">Configure the AskUI <strong id=\"><code id=\">UiControlClient</code></strong> to use the credentials and the <strong id=\"><code id=\">uiControllerUrl</code></strong></li></ul>\n\n<p id=\">The first thing we want to add to our custom code is the <strong id=\">uiControllerUrl</strong>. Click <strong id=\">Refresh fields</strong> so the <strong id=\">Configure</strong> tab shows up at the start of the action. Here is the relevant code snippet.</p><pre></pre><p id=\">Then head over to <a href=\"https://pipedream.com/settings/env-vars\" id=\">environment variables</a> and add your <strong id=\">workspaceId</strong> and <strong id=\">accessToken</strong> there. You obtained those by following the <a href=\"#prerequisites\" id=\">prerequisites instructions above</a>. You can now setup the connection to the AskUI Controller over the <strong id=\">UiControlClient</strong> like this. Notice how easy it is to use arbitrary node-packages in Pipedream? I only needed to import <strong id=\">UiControlClient</strong> and it just worked ðŸ¥³.</p><p id=\"><em id=\">Note: The following code also contains the teardown.</em></p><pre></pre><h2 id=\">3. Write the AskUI Workflow</h2>\n\n<p id=\">When you look at our example form, we want to fill out, you notice that we have to do the following things:</p>\n\n<ul id=\"><li id=\">Write <strong id=\"><code id=\">simpleForm@authenticationtest.com</code></strong> into the textfield <strong id=\">E-Mail Address</strong></li><li id=\">Write <strong id=\"><code id=\">pa$$w0rd</code></strong> into the next textfield</li><li id=\">Click the button <strong id=\"><code id=\">Log In</code></strong></li><li id=\">Validate the success</li></ul>\n\n<p id=\">The less inference we invoke the faster the AskUI workflow will execute. Everything that prompts AskUI to search for an element on the screen invokes inference. So let us try to invoke the inference only once by finding the first textfield for the E-Mail Address. Then we will use keypresses to navigate the form. This is the code to achieve this:</p><pre></pre><h2 id=\">Send an Email</h2>\n\n<p id=\">Doing a smoke test without reporting about its success state would not help us. So we will just send us an email with the <strong id=\">Send Yourself an Email</strong> action. </p><p id=\">As subject we choose <strong id=\">Smoke Test State</strong> and for the text we reference our success variable we returned in our action above with <strong id=\"><code id=\">{{steps.code.$return_value.success}}</code></strong>.</p><h2 id=\">Gitpod As Remote Machine</h2>\n\n<p id=\">If you do not have a remote machine ready-to-go you can use a service like Gitpod. We have a prepared <a href=\"https://github.com/askui/askui-try-out\" id=\">Try-Out-Repository</a> which comes with AskUI already setup and a VNC to observe the AskUI workflow. Start the repository in Gitpod over the <strong id=\">Open in Gitpod</strong>-button and let it finish the predefined AskUI workflow. When it reached the AskUI Docs (docs.askui.com) maximize the browser window in the <strong id=\">Simple Browser</strong> tab.</p><p id=\">Switch to the <strong id=\">TERMINAL</strong> tab and start the AskUI-Controller with the following command:</p><pre></pre><p id=\">Also make sure that you expose the port to the AskUI Controller (open lock icon). Head to the <strong id=\">PORTS</strong> tab and make the port <strong id=\"><code id=\">6769</code></strong> public. Then copy the URL and add it as the property <strong id=\">uiControllerUrl</strong> in the Pipedream action. </p><figure id=\" class=\"w-richtext-figure-type-image w-richtext-align-fullwidth\" style=\"max-width:2312px\" data-rt-type=\"image\" data-rt-align=\"fullwidth\" data-rt-max-width=\"2312px\"><div id=\"><img src=\"https://cdn.prod.website-files.com/6630f90ff7431b0c5b1bb0e7/6634d1c39c4145496ceb6970_65c2284359f4ef1d139c2b41_gitpod_ports.png\" loading=\"lazy\" alt=\"Ports tab in Visual Studio Code. Shows columns Port, Address, Protocol, Description and State. Three ports are registered: 6080, 5900, 6769. They have a copy, lock, view side-by-side and a browser icon in the Address column. Protocal is HTTP for each. No Description for each. State is open (private) for each. Lock for Port 6769 is open.\" width=\"auto\" height=\"auto\" id=\"></div><figcaption id=\">Expose the AskUI Controller on port 6769.</figcaption></figure><h2 id=\">Conclusion</h2>\n\n<p id=\">Building a smoke test with Pipedream and AskUI was a practical use case to see how both tools integrate. The simplicity of Pipedream and its ability to integrate JavaScript code and Node packages was helpful. With that AskUI could be setup seamlessly inside an action and connected to an external AskUI Controller.</p>",
  "category": "Academy",
  "readTime": "4 min read",
  "date": "2024-11-11",
  "publishedAt": "Mon Nov 11 2024 11:46:45 GMT+0000 (Coordinated Universal Time)",
  "author": "johannes-dienst",
  "image": "https://cdn.prod.website-files.com/6630f90ff7431b0c5b1bb0e7/671a0590c1722fe6f9ed4729_cover_small.webp",
  "featured": false,
  "contentPath": "run-askui-workflows-with-pipedream-for-smoke-testing.md"
}